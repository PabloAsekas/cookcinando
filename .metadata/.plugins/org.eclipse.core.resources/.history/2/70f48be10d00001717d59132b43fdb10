package daw.cookcinando;

import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;

import org.springframework.beans.factory.annotation.Autowired;
//import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
//import org.springframework.web.bind.annotation.RequestParam;

import daw.cookcinando.model.Recipe;

@Controller
public class RecipeController {
	
	@Autowired
	private RecipeRepository recipeRepository;
	private List<String> ingredients = new ArrayList<>();
	private List<String> typesFood = new ArrayList<>();
	
	@PostConstruct
	public void init() {
		
		ingredients.add("Ingrediente1");
		ingredients.add("Ingrediente2");
		ingredients.add("Ingrediente3");
		ingredients.add("Ingrediente4");
		
		typesFood.add("Comida1");
		typesFood.add("Comida2");
		typesFood.add("Comida3");
		typesFood.add("Comida4");
		
		recipeRepository.save(new Recipe("Filete con patatas", "Un filetito con patatas bien rico", "https://media-cdn.tripadvisor.com/media/photo-s/04/4a/66/98/la-casona.jpg", 
				
										 "Proceso de preparacion: Al contrario del pensamiento popular, el texto de Lorem Ipsum no es "
										 + "simplemente texto aleatorio. Tiene sus raices en una pieza cl´sica de la literatura del Latin"
										 + ", que data del año 45 antes de Cristo, haciendo que este adquiera mas de 2000 años de "
										 + "antiguedad. Richard McClintock, un profesor de Latin de la Universidad de Hampden-Sydney "
										 + "en Virginia, encontró una de las palabras más oscuras de la lengua del latín, consecteur, "
										 + "en un pasaje de Lorem Ipsum, y al seguir leyendo distintos textos del latín, descubrió la "
										 + "fuente indudable. Lorem Ipsum viene de las secciones 1.10.32 y 1.10.33 de de Finnibus "
										 + "Bonorum et Malorum (Los Extremos del Bien y El Mal) por Cicero, escrito en el año 45 antes "
										 + "de Cristo. Este libro es un tratado de teoría de éticas, muy popular durante el Renacimiento."
										 + " La primera linea del Lorem Ipsum, Lorem ipsum dolor sit amet.., "
										 + "viene de una linea en la sección 1.10.32 "
										 + "El trozo de texto estándar de Lorem Ipsum usado desde el año 1500 es reproducido debajo "
										 + "para aquellos interesados. Las secciones 1.10.32 y 1.10.33 de Finibus Bonorum et Malorum "
										 + "por Cicero son también reproducidas en su forma original exacta, acompañadas por versiones "
										 + "en Inglés de la traducción realizada en 1914 por H. Rackham."

								         , ingredients, typesFood));		
		
		recipeRepository.save(new Recipe("Hamburguesa de pollo", "Una hamburguesa de pollo que no resbala", "http://cdn.kiwilimon.com/recetaimagen/13823/6183.jpg", "Proceso de preparacion:", ingredients, typesFood));
		recipeRepository.save(new Recipe("Filete con patatas", "Un filetito con patatas bien rico", "https://media-cdn.tripadvisor.com/media/photo-s/04/4a/66/98/la-casona.jpg", "Proceso de preparacion:", ingredients, typesFood));
		recipeRepository.save(new Recipe("Hamburguesa de pollo", "Una hamburguesa de pollo que no resbala", "http://cdn.kiwilimon.com/recetaimagen/13823/6183.jpg", "Proceso de preparacion:", ingredients, typesFood));
		recipeRepository.save(new Recipe("Filete con patatas", "Un filetito con patatas bien rico", "https://media-cdn.tripadvisor.com/media/photo-s/04/4a/66/98/la-casona.jpg", "Proceso de preparacion:", ingredients, typesFood));
		recipeRepository.save(new Recipe("Hamburguesa de pollo", "Una hamburguesa de pollo que no resbala", "http://cdn.kiwilimon.com/recetaimagen/13823/6183.jpg", "Proceso de preparacion:", ingredients, typesFood));
		recipeRepository.save(new Recipe("Filete con patatas", "Un filetito con patatas bien rico", "https://media-cdn.tripadvisor.com/media/photo-s/04/4a/66/98/la-casona.jpg", "Proceso de preparacion:", ingredients, typesFood));
		recipeRepository.save(new Recipe("Hamburguesa de pollo", "Una hamburguesa de pollo que no resbala", "http://cdn.kiwilimon.com/recetaimagen/13823/6183.jpg", "Proceso de preparacion:", ingredients, typesFood));
		recipeRepository.save(new Recipe("Filete con patatas", "Un filetito con patatas bien rico", "https://media-cdn.tripadvisor.com/media/photo-s/04/4a/66/98/la-casona.jpg", "Proceso de preparacion:", ingredients, typesFood));
		recipeRepository.save(new Recipe("Hamburguesa de pollo", "Una hamburguesa de pollo que no resbala", "http://cdn.kiwilimon.com/recetaimagen/13823/6183.jpg", "Proceso de preparacion:", ingredients, typesFood));
		recipeRepository.save(new Recipe("Filete con patatas", "Un filetito con patatas bien rico", "https://media-cdn.tripadvisor.com/media/photo-s/04/4a/66/98/la-casona.jpg", "Proceso de preparacion:", ingredients, typesFood));
		recipeRepository.save(new Recipe("Hamburguesa de pollo", "Una hamburguesa de pollo que no resbala", "http://cdn.kiwilimon.com/recetaimagen/13823/6183.jpg", "Proceso de preparacion:", ingredients, typesFood));	
	}
	
	@RequestMapping("/recetas") //Enlace para las recetas
	public String recetas (Model model) {
		model.addAttribute("recetas", recipeRepository.findAll());
		return "recetas";
	}
	
	@RequestMapping("/receta/{id}")
	public String verReceta(Model model, @PathVariable long id) {
		Recipe receta = recipeRepository.findOne(id);
		model.addAttribute("receta", receta);
		
		List<Recipe> recomendadas = new ArrayList<Recipe>();
		for (long i = 1; i < 4; i++) {
			recomendadas.add(recipeRepository.getOne(i));
		}
		model.addAttribute("recomendadas", recomendadas);
		return "receta";
	}
}